-- MySQL Script generated by MySQL Workbench
-- Sun Oct 15 17:34:02 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema SafeChatDB
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `SafeChatDB` ;

-- -----------------------------------------------------
-- Schema SafeChatDB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `SafeChatDB` DEFAULT CHARACTER SET utf8 ;
USE `SafeChatDB` ;

-- -----------------------------------------------------
-- Table `SafeChatDB`.`TipoIdentificacion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`TipoIdentificacion` (
  `idTipoIdentificacion` INT NOT NULL,
  `nombreTipo` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`idTipoIdentificacion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Usuarios`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Usuarios` (
  `idUsuarios` INT NOT NULL AUTO_INCREMENT,
  `nombres` VARCHAR(45) NOT NULL,
  `apellidos` VARCHAR(45) NOT NULL,
  `numeroIdentificacion` BIGINT(10) NOT NULL,
  `correoElectronico` VARCHAR(45) NULL DEFAULT NULL,
  `numeroCelular` BIGINT(10) NOT NULL,
  `Domicilio` VARCHAR(45) NOT NULL,
  `TipoIdentificacion_idTipoIdentificacion` INT NOT NULL,
  PRIMARY KEY (`idUsuarios`),
  INDEX `fk_Usuarios_TipoIdentificacion1_idx` (`TipoIdentificacion_idTipoIdentificacion` ASC) VISIBLE,
  CONSTRAINT `fk_Usuarios_TipoIdentificacion1`
    FOREIGN KEY (`TipoIdentificacion_idTipoIdentificacion`)
    REFERENCES `SafeChatDB`.`TipoIdentificacion` (`idTipoIdentificacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`TiposDeRecursos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`TiposDeRecursos` (
  `idTiposDeRecursos` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcionTipo` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`idTiposDeRecursos`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Recursos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Recursos` (
  `idRecursos` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(100) NOT NULL,
  `ubicacion` VARCHAR(45) NOT NULL,
  `contacto` VARCHAR(45) NOT NULL,
  `TiposDeRecursos_idTiposDeRecursos` INT NOT NULL,
  PRIMARY KEY (`idRecursos`),
  INDEX `fk_Recursos_TiposDeRecursos1_idx` (`TiposDeRecursos_idTiposDeRecursos` ASC) VISIBLE,
  CONSTRAINT `fk_Recursos_TiposDeRecursos1`
    FOREIGN KEY (`TiposDeRecursos_idTiposDeRecursos`)
    REFERENCES `SafeChatDB`.`TiposDeRecursos` (`idTiposDeRecursos`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`TiposDeViolencias`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`TiposDeViolencias` (
  `idTiposDeViolencias` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcionTipo` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`idTiposDeViolencias`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Cargos`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Cargos` (
  `idCargos` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcion` VARCHAR(160) NOT NULL,
  PRIMARY KEY (`idCargos`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Asesores`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Asesores` (
  `idAsesores` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `apellidos` VARCHAR(45) NOT NULL,
  `numeroIdentificacion` VARCHAR(45) NOT NULL,
  `correo` VARCHAR(45) NOT NULL,
  `Cargos_idCargos` INT NOT NULL,
  `TipoIdentificacion_idTipoIdentificacion` INT NOT NULL,
  PRIMARY KEY (`idAsesores`),
  INDEX `fk_Asesores_Cargos_idx` (`Cargos_idCargos` ASC) VISIBLE,
  INDEX `fk_Asesores_TipoIdentificacion1_idx` (`TipoIdentificacion_idTipoIdentificacion` ASC) VISIBLE,
  CONSTRAINT `fk_Asesores_Cargos`
    FOREIGN KEY (`Cargos_idCargos`)
    REFERENCES `SafeChatDB`.`Cargos` (`idCargos`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Asesores_TipoIdentificacion1`
    FOREIGN KEY (`TipoIdentificacion_idTipoIdentificacion`)
    REFERENCES `SafeChatDB`.`TipoIdentificacion` (`idTipoIdentificacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Status` (
  `idStatus` INT NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `descripcionStatus` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`idStatus`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Conversaciones`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Conversaciones` (
  `idConversaciones` INT NOT NULL,
  `fechaInicio` DATETIME NULL DEFAULT NULL,
  `fechaFin` DATETIME NULL DEFAULT NULL,
  `Usuarios_idUsuarios` INT NOT NULL,
  `Status_idStatus` INT NOT NULL,
  `Recursos_idRecursos` INT NOT NULL,
  PRIMARY KEY (`idConversaciones`),
  INDEX `fk_Conversaciones_Usuarios1_idx` (`Usuarios_idUsuarios` ASC) VISIBLE,
  INDEX `fk_Conversaciones_Status1_idx` (`Status_idStatus` ASC) VISIBLE,
  INDEX `fk_Conversaciones_Recursos1_idx` (`Recursos_idRecursos` ASC) VISIBLE,
  CONSTRAINT `fk_Conversaciones_Usuarios1`
    FOREIGN KEY (`Usuarios_idUsuarios`)
    REFERENCES `SafeChatDB`.`Usuarios` (`idUsuarios`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Conversaciones_Status1`
    FOREIGN KEY (`Status_idStatus`)
    REFERENCES `SafeChatDB`.`Status` (`idStatus`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Conversaciones_Recursos1`
    FOREIGN KEY (`Recursos_idRecursos`)
    REFERENCES `SafeChatDB`.`Recursos` (`idRecursos`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Interacciones`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Interacciones` (
  `idInteracciones` INT NOT NULL,
  `Conversaciones_idConversaciones` INT NOT NULL,
  `Usuarios_idUsuarios` INT NOT NULL,
  `TiposDeViolencias_idTiposDeViolencias` INT NOT NULL,
  PRIMARY KEY (`idInteracciones`),
  INDEX `fk_Interacciones_Conversaciones1_idx` (`Conversaciones_idConversaciones` ASC) VISIBLE,
  INDEX `fk_Interacciones_Usuarios1_idx` (`Usuarios_idUsuarios` ASC) VISIBLE,
  INDEX `fk_Interacciones_TiposDeViolencias1_idx` (`TiposDeViolencias_idTiposDeViolencias` ASC) VISIBLE,
  CONSTRAINT `fk_Interacciones_Conversaciones1`
    FOREIGN KEY (`Conversaciones_idConversaciones`)
    REFERENCES `SafeChatDB`.`Conversaciones` (`idConversaciones`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Interacciones_Usuarios1`
    FOREIGN KEY (`Usuarios_idUsuarios`)
    REFERENCES `SafeChatDB`.`Usuarios` (`idUsuarios`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Interacciones_TiposDeViolencias1`
    FOREIGN KEY (`TiposDeViolencias_idTiposDeViolencias`)
    REFERENCES `SafeChatDB`.`TiposDeViolencias` (`idTiposDeViolencias`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `SafeChatDB`.`Agendas`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `SafeChatDB`.`Agendas` (
  `idAgendas` INT NOT NULL,
  `fechaReunion` DATETIME NOT NULL,
  `Usuarios_idUsuarios` INT NOT NULL,
  `Asesores_idAsesores` INT NOT NULL,
  PRIMARY KEY (`idAgendas`),
  INDEX `fk_Agendas_Usuarios1_idx` (`Usuarios_idUsuarios` ASC) VISIBLE,
  INDEX `fk_Agendas_Asesores1_idx` (`Asesores_idAsesores` ASC) VISIBLE,
  CONSTRAINT `fk_Agendas_Usuarios1`
    FOREIGN KEY (`Usuarios_idUsuarios`)
    REFERENCES `SafeChatDB`.`Usuarios` (`idUsuarios`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Agendas_Asesores1`
    FOREIGN KEY (`Asesores_idAsesores`)
    REFERENCES `SafeChatDB`.`Asesores` (`idAsesores`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- Insertando datos en la tabla TipoIdentificacion
INSERT INTO `SafeChatDB`.`TipoIdentificacion` (`idTipoIdentificacion`, `nombreTipo`)
VALUES 
(1, 'Cedula de Ciudadania'),
(2, 'Tarjeta de Identidad'),
(3, 'Cedula de Extranjeria'),
(4, 'Pasaporte'),
(5, 'Registro Civil'),
(6, 'Permiso Especial de Permanencia');

-- Insertando datos en la tabla Usuarios
INSERT INTO `SafeChatDB`.`Usuarios` (`nombres`, `apellidos`, `numeroIdentificacion`, `correoElectronico`, `numeroCelular`, `Domicilio`, `TipoIdentificacion_idTipoIdentificacion`)
VALUES 
('Juan', 'Perez', 12345678, 'juan.perez@example.com', 3001234567, 'Calle 123 #45-67', 1),
('Ana', 'Gomez', 23456789, 'ana.gomez@example.com', 3109876543, 'Carrera 45 #67-89', 2),
('Pedro', 'Rodriguez', 34567890, 'pedro.rodriguez@example.com', 3201234567, 'Avenida 12 #34-56', 1),
('Maria', 'Fernández', 45678901, 'maria.fernandez@example.com', 3007654321, 'Transversal 78 #12-34', 3),
('Carlos', 'Lopez', 56789012, 'carlos.lopez@example.com', 3151234567, 'Diagonal 23 #45-67', 1);

-- Insertando datos en la tabla TiposDeRecursos
INSERT INTO `SafeChatDB`.`TiposDeRecursos` (`idTiposDeRecursos`, `nombre`, `descripcionTipo`)
VALUES 
(1, 'Policia Nacional', 'Descripcion del recurso A'),
(2, 'Fiscalia General', 'Descripcion del recurso B'),
(3, 'Comisaria de la Mujer', 'Descripcion del recurso C'),
(4, 'Recurso Psicologicos', 'Descripcion del recurso D'),
(5, 'Recurso Abogados', 'Descripcion del recurso E');

-- Insertando datos en la tabla Recursos
INSERT INTO `SafeChatDB`.`Recursos` (`idRecursos`, `nombre`, `descripcion`, `ubicacion`, `contacto`, `TiposDeRecursos_idTiposDeRecursos`)
VALUES 
(1, 'Estacion Central Policial', 'Estacion central para reportar delitos y solicitar ayuda', 'Calle Principal 123', '310-123-4567', 1),
(2, 'Oficina Fiscalia', 'Oficina principal para procesar denuncicomoias y brindar apoyo legal', 'Avenida Revolucion 456', '320-456-7890', 2),
(3, 'Comisaria de Apoyo a la Mujer', 'Centro especializado para mujeres victimas de violencia', 'Calle Rosas 789', '300-987-6543', 3),
(4, 'Centro de Apoyo Psicologico', 'Brinda terapia y asesoramiento a personas afectadas', 'Boulevard Paz 101', '311-654-3210', 4),
(5, 'Bufete de Abogados', 'Abogados especializados en casos de violencia y asesoria legal', 'Calle Justicia 202', '312-741-8529', 5);

-- Insertando datos en la tabla TiposDeViolencias
INSERT INTO `SafeChatDB`.`TiposDeViolencias` (`idTiposDeViolencias`, `nombre`, `descripcionTipo`)
VALUES 
(1, 'Violencia Fisica', 'Agresion directa hacia una persona causando daño corporal.'),
(2, 'Violencia Psicologica', 'Daño emocional o mental causado por intimidacion, humillacion u otras formas de abuso.'),
(3, 'Violencia Sexual', 'Cualquier acto sexual, intento de consumar un acto sexual, comentarios o avances sexuales no deseados.'),
(4, 'Violencia Economica', 'Limitacion o control de los recursos economicos de una persona sin su consentimiento.'),
(5, 'Violencia Simbolica', 'Transmision de mensajes, valores, iconos o signos que perpetúan relaciones de dominacion, discriminacion o desigualdad.');

-- Insertando datos en la tabla Cargos
INSERT INTO `SafeChatDB`.`Cargos` (`idCargos`, `nombre`, `descripcion`)
VALUES 
(1, 'Coordinador de Asesoria', 'Encargado de liderar y supervisar al equipo de asesores, asegurándose de que las victimas reciban el apoyo adecuado y oportuno.'),
(2, 'Asesor Psicosocial', 'Ofrece apoyo emocional y guia en la recuperacion psicologica, ayudando a las victimas a superar traumas y a reintegrarse a la sociedad.'),
(3, 'Asesor Legal', 'Proporciona orientacion legal a las victimas, ayudándolas a entender sus derechos y el proceso legal que pueden seguir.'),
(4, 'Asesor de Recursos y Albergues', 'Ayuda a las victimas a acceder a recursos disponibles, como albergues, alimentos, y otros servicios esenciales.'),
(5, 'Asesor de Prevencion', 'Se centra en la prevencion de la violencia, ofreciendo talleres, charlas y recursos educativos a comunidades y grupos vulnerables.');

-- Insertando datos en la tabla Asesores
INSERT INTO `SafeChatDB`.`Asesores` (`idAsesores`, `nombre`, `apellidos`, `numeroIdentificacion`, `correo`, `Cargos_idCargos`, `TipoIdentificacion_idTipoIdentificacion`)
VALUES 
(1, 'Lucia', 'Mendoza Gomez',  1012345678, 'lucia.mendoza@example.com', 1, 1),
(2, 'Carlos', 'Ortega Ruiz', 1012345679, 'carlos.ortega@example.com', 2, 1),
(3, 'Marta', 'Ramirez Paredes', 1012345680, 'marta.ramirez@example.com', 3, 2),
(4, 'Javier', 'Hernández Peña', 1012345681, 'javier.hernandez@example.com', 4, 3),
(5, 'Andrea', 'Fernández Salas', 1012345682, 'andrea.fernandez@example.com', 5, 1);

-- Insertando datos en la tabla Status
INSERT INTO `SafeChatDB`.`Status` (`idStatus`, `nombre`, `descripcionStatus`)
VALUES 
(1, 'Reportado', 'El caso ha sido reportado pero aún no ha sido revisado por un asesor.'),
(2, 'En revision', 'El caso está siendo evaluado por un asesor para determinar la mejor forma de proceder.'),
(3, 'En proceso', 'Se están tomando medidas activas para ayudar a la persona afectada. Esto podria incluir asesoramiento, recursos legales, etc.'),
(4, 'Finalizado', 'El caso ha sido resuelto o se ha proporcionado la asistencia necesaria.'),
(5, 'Archivado', 'El caso ha sido archivado debido a la falta de informacion, no se pudo contactar a la persona afectada, o por otras razones administrativas.');

-- Insertando datos en la tabla Conversaciones
-- Nota: Se requiere que los registros anteriores ya esten insertados
INSERT INTO `SafeChatDB`.`Conversaciones` (`idConversaciones`, `fechaInicio`, `fechaFin`, `Usuarios_idUsuarios`, `Status_idStatus`, `Recursos_idRecursos`)
VALUES 
(1, '2023-10-10 09:45:00', NULL, 1, 1, 1),
(2, '2023-10-11 10:30:00', '2023-10-11 11:15:00', 2, 4, 2),
(3, '2023-10-12 12:05:00', NULL, 3, 2, 3),
(4, '2023-10-13 14:15:00', '2023-10-13 15:05:00', 4, 3, 4),
(5, '2023-10-14 08:30:00', NULL, 5, 1, 5);

-- Insertando datos en la tabla Agendas
INSERT INTO `SafeChatDB`.`Agendas` (`idAgendas`, `fechaReunion`, `Usuarios_idUsuarios`, `Asesores_idAsesores`)
VALUES 
(1, '2023-10-20 10:00:00', 1, 1),  -- Juan tiene una reunion con Lucia
(2, '2023-10-21 11:00:00', 2, 2),  -- Ana tiene una reunion con Carlos
(3, '2023-10-22 13:00:00', 3, 3),  -- Pedro tiene una reunion con Marta
(4, '2023-10-23 14:30:00', 4, 4),  -- Maria tiene una reunion con Javier
(5, '2023-10-24 09:00:00', 5, 5);  -- Carlos tiene una reunion con Andrea

-- Insertando datos en la tabla Interacciones
INSERT INTO `SafeChatDB`.`Interacciones` (`idInteracciones`, `Conversaciones_idConversaciones`, `Usuarios_idUsuarios`, `TiposDeViolencias_idTiposDeViolencias`)
VALUES 
(1, 1, 1, 1), -- Juan reporto una Violencia Fisica en la conversacion 1
(2, 2, 2, 2), -- Ana reporto una Violencia Psicologica en la conversacion 2
(3, 3, 3, 3), -- Pedro reporto una Violencia Sexual en la conversacion 3
(4, 4, 4, 4), -- Maria reporto una Violencia Economica en la conversacion 4
(5, 5, 5, 5); -- Carlos reporto una Violencia Simbolica en la conversacion 5